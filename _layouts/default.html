<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Peng Yin's Blog</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <!-- 网站图标设置 -->
    <link rel="shortcut icon" type="image/x-icon" href="{{ '/assets/images/favicon.ico' | relative_url }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/images/apple-touch-icon.png' | relative_url }}">
    
    <!-- 终端动画效果脚本 -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 检查是否是主页
      if (window.location.pathname === '{{ "/" | relative_url }}' || 
          window.location.pathname === '{{ site.baseurl }}/' || 
          window.location.pathname === '{{ site.baseurl }}') {
        
        // 检测是否为移动设备
        const isMobile = window.innerWidth <= 768;
        
        // 检测移动端显示模式
        const mobileMode = getComputedStyle(document.documentElement)
          .getPropertyValue('--mobile-terminal-mode').trim();
        
        // 确保终端动画元素存在
        setTimeout(function() {
          const terminalAnimation = document.querySelector('.terminal-animation');
          if (terminalAnimation) {
            const terminalLines = terminalAnimation.querySelectorAll('.terminal-line');
            
            // 在移动设备上根据模式使用不同的动画方式
            if (isMobile) {
              if (mobileMode === 'scroll') {
                // 滚动模式使用类似打字机的效果
                terminalLines.forEach((line, index) => {
                  line.style.width = '0';
                  line.style.opacity = '0';
                  
                  setTimeout(() => {
                    line.style.animation = 'none';
                    setTimeout(() => {
                      line.style.animation = `typewriter-mobile 3s forwards ${index * 1.2}s`;
                    }, 10);
                  }, 100);
                  
                  // 确保每个动画完成后自动滚动到可见区域
                  setTimeout(() => {
                    line.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'end' });
                  }, (index * 1.2 + 3) * 1000 + 200);
                });
              } else {
                // 换行模式使用淡入效果
                terminalLines.forEach((line, index) => {
                  line.style.opacity = '0';
                  
                  setTimeout(() => {
                    line.style.opacity = '1';
                  }, index * 800);
                });
              }
            } else {
              // 桌面端保持原有动画效果
              terminalLines.forEach((line, index) => {
                line.style.width = '0';
                line.style.opacity = '0';
                
                setTimeout(() => {
                  line.style.animation = 'none';
                  setTimeout(() => {
                    line.style.animation = `typewriter 1.5s forwards ${index * 1.8}s`;
                  }, 10);
                }, 100);
              });
            }
          }
        }, 500);
      }
    });
    </script>

    <style>
      /* 全局配置变量 - 可以在这里切换移动端显示模式 */
      :root {
        --mobile-terminal-mode: wrap; /* 可选值: wrap（换行）, scroll（横向滚动） */
      }
      
      /* 全局移动端优化 */
      @media screen and (max-width: 768px) {
        .container {
          padding: 0 10px;
        }
        
        header h1 {
          font-size: 24px;
        }
        
        header h2 {
          font-size: 16px;
        }
        
        .header-subtitle {
          font-size: 14px;
        }
      }
    </style>

    {% seo %}
  </head>

  <body>
    <header>
      <div class="container">
        <a id="a-title" href="{{ '/' | relative_url }}">
          <h1>{{ site.title | default: site.github.repository_name }}</h1>
        </a>
        <h2>{{ site.description | default: site.github.project_tagline }}</h2>
        <pre class="header-subtitle">I am a web developer, Welcome to my blog</pre>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        {% if page.url == '/' %}
        <div class="terminal-animation">
          <span class="terminal-line">我是银鹏，专注前端与全栈开发</span>
          <span class="terminal-line">前端架构与技术选型：熟悉 SPA、微前端、SSR、跨端小程序、H5 应用、Low Code、数据大屏等架构方案</span>
          <span class="terminal-line">NodeJS 后端开发：具备生产级 RESTful API 构建经验，熟练使用 Nest.js/Egg.js 框架</span>
          <span class="terminal-line">前端工程化：掌握前端项目构建、打包、发布全流程，熟悉自动化测试体系搭建</span>
          <span class="terminal-line">全栈运维能力：熟练使用 Jenkins、Linux 命令、Nginx、Docker 等工具</span>
          <span class="terminal-line">大模型开发基础：了解大模型技术原理，具备 LangChain、MCP及 Agent 开发实践经验</span>
        </div>

        <style>
          /* 内联样式确保动画效果正常工作 */
          .terminal-animation {
            margin: 30px 0;
            padding: 20px;
            background: #0d1117;
            border-radius: 8px;
            border: 1px solid #30363d;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            overflow: hidden;
          }
          
          .terminal-line {
            display: block;
            margin-bottom: 10px;
            opacity: 0;
            animation: typewriter 1.5s forwards;
            white-space: nowrap;
            overflow: hidden;
            width: 0;
            color: #b5e853;
          }
          
          .terminal-line:nth-child(2) {
            animation-delay: 1.8s;
            color: #63c0f5;
          }
          
          .terminal-line:nth-child(3) {
            animation-delay: 3.6s;
            color: #f0c674;
          }
          
          .terminal-line:nth-child(4) {
            animation-delay: 5.4s;
            color: #8abeb7;
          }
          
          .terminal-line:nth-child(5) {
            animation-delay: 7.2s;
            color: #b294bb;
          }
          
          .terminal-line:nth-child(6) {
            animation-delay: 9.0s;
            color: #70c0b1;
          }
          
          .terminal-line:before {
            content: "$ ";
            color: #00ff00;
            display: inline-block;
          }
          
          @keyframes typewriter {
            from {
              width: 0;
              opacity: 1;
            }
            to {
              width: 100%;
              opacity: 1;
            }
          }
          
          /* 新增标题样式 */
          .header-subtitle {
            color: #b5e853;
            font-family: 'Fira Code', monospace;
            margin-top: 10px;
            font-size: 16px;
          }
          
          /* 移动端适配 */
          @media screen and (max-width: 768px) {
            .terminal-animation {
              padding: 15px;
              margin: 20px 0;
            }
            
            /* 换行模式 */
            .terminal-line {
              line-height: 1.5;
              animation: fadeIn 1.5s forwards;
            }
            
            /* 根据配置变量应用不同样式 */
            .terminal-line {
              /* 默认应用于换行模式 */
              white-space: var(--mobile-terminal-mode, normal);
              word-wrap: break-word;
              width: auto !important;
              max-width: 100%;
              overflow: visible;
            }
            
            /* 滚动模式样式 */
            .terminal-animation.scroll-mode {
              overflow-x: auto;
              -webkit-overflow-scrolling: touch;
              padding-bottom: 20px; /* 为滚动条留出空间 */
            }
            
            /* 基于配置变量应用滚动模式 */
            :root[style*="--mobile-terminal-mode:scroll"] .terminal-line,
            :root[style*="--mobile-terminal-mode: scroll"] .terminal-line {
              white-space: nowrap;
              overflow-x: visible;
              width: 0 !important; /* 恢复打字机效果所需的宽度设置 */
              animation: typewriter-mobile 3s forwards;
            }
            
            :root[style*="--mobile-terminal-mode:scroll"] .terminal-animation,
            :root[style*="--mobile-terminal-mode: scroll"] .terminal-animation {
              overflow-x: auto;
            }
            
            @keyframes typewriter-mobile {
              from {
                width: 0;
                opacity: 1;
              }
              to {
                width: max-content; /* 允许内容自然扩展 */
                opacity: 1;
              }
            }
            
            @keyframes fadeIn {
              from {
                opacity: 0;
              }
              to {
                opacity: 1;
              }
            }
          }
          
          /* 添加一个终端模式切换器的样式 */
          .terminal-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: #b5e853;
            border: 1px solid #30363d;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            display: none; /* 默认隐藏，只在移动端显示 */
          }
          
          @media screen and (max-width: 768px) {
            .terminal-mode-toggle {
              display: flex;
            }
          }
        </style>
        
        <!-- 添加终端模式切换按钮，仅在移动端显示 -->
        <div class="terminal-mode-toggle" id="terminal-mode-toggle">⟷</div>
        
        <script>
          // 检测URL参数来设置移动终端模式
          document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const terminalMode = urlParams.get('terminal-mode');
            
            if (terminalMode === 'scroll') {
              document.documentElement.style.setProperty('--mobile-terminal-mode', 'scroll');
              document.querySelector('.terminal-animation')?.classList.add('scroll-mode');
            } else if (terminalMode === 'wrap') {
              document.documentElement.style.setProperty('--mobile-terminal-mode', 'normal');
              document.querySelector('.terminal-animation')?.classList.remove('scroll-mode');
            }
            
            // 添加终端模式切换功能
            const toggleButton = document.getElementById('terminal-mode-toggle');
            if (toggleButton) {
              toggleButton.addEventListener('click', function() {
                const currentMode = getComputedStyle(document.documentElement)
                  .getPropertyValue('--mobile-terminal-mode').trim();
                
                if (currentMode === 'scroll' || currentMode === ' scroll') {
                  document.documentElement.style.setProperty('--mobile-terminal-mode', 'normal');
                  document.querySelector('.terminal-animation')?.classList.remove('scroll-mode');
                  toggleButton.textContent = '⟷';
                } else {
                  document.documentElement.style.setProperty('--mobile-terminal-mode', 'scroll');
                  document.querySelector('.terminal-animation')?.classList.add('scroll-mode');
                  toggleButton.textContent = '↴';
                }
              });
            }
          });
        </script>
        {% endif %}
        
        {{ content }}
      </section>

      <footer>
        <p>
          Created by <a href="https://github.com/peng-yin">peng-yin</a> | 
          &copy; {{ site.time | date: '%Y' }} {{ site.author | default: site.github.owner_name }}
        </p>
        <p>
          <a href="{{ site.github.owner_url }}">GitHub</a> | 
          <a href="{{ site.github.repository_url }}/issues">Issues</a>
        </p>
      </footer>
    </div>
  </body>
</html> 